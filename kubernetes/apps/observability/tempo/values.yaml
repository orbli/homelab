# Grafana Tempo Helm Chart Values for ArgoCD deployment
# Distributed tracing backend with OTLP support

# Replicas
replicas: 1

tempo:
  # Storage backend
  storage:
    trace:
      backend: local
      local:
        path: /var/tempo/traces
      wal:
        path: /var/tempo/wal
  
  # Retention settings  
  retention: 720h  # 30 days
  
  # Server configuration - this is the HTTP API port
  server:
    http_listen_port: 3200
    grpc_listen_port: 9095
  
  # Receivers configuration for traces
  receivers:
    otlp:
      protocols:
        grpc:
          endpoint: "0.0.0.0:4317"
        http:
          endpoint: "0.0.0.0:4318"
    zipkin:
      endpoint: "0.0.0.0:9411"
    jaeger:
      protocols:
        thrift_http:
          endpoint: "0.0.0.0:14268"
        grpc:
          endpoint: "0.0.0.0:14250"
        thrift_compact:
          endpoint: "0.0.0.0:6831"
        thrift_binary:
          endpoint: "0.0.0.0:6832"
  
  # Metrics generator disabled (we use Prometheus)
  metricsGenerator:
    enabled: false
  
  # Resources
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 2Gi

# Persistence
persistence:
  enabled: true
  storageClassName: k8s-csi
  size: 20Gi
  accessModes:
    - ReadWriteOnce

# Service configuration
service:
  type: ClusterIP
  
# Service Monitor for Prometheus
serviceMonitor:
  enabled: true
  interval: 30s

# Ingress disabled (using Tailscale)
ingress:
  enabled: false

# Test
test:
  enabled: false